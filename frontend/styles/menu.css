:root{
  --site-green: #6D7E4F;
  --text-default: #222222;
  --nav-height: 64px;
  --container-max:  1200px;
}

/* BASE */
.container { 
  width: 100%; 
  max-width: var(--container-max); 
  margin: 0 auto; 
  padding:0 16px; 
  box-sizing: border-box; 
}

.topbar { 
  width: 100%; 
  background:var(--site-green); 
  color:#fff; 
  padding:6px 0; 
  font-size:0.9rem; 
  z-index:3000; 
}

.site-header { 
  width:100%; 
  background:#fff; 
  position:relative; 
  z-index:2000; 
}

.site-header .container { 
  display:flex ! important; 
  align-items:center ! important; 
  justify-content:space-between !important; 
  gap:12px !important; 
  padding:12px 16px; 
  box-sizing:border-box; 
}

.logo-and-title { 
  display: flex; 
  align-items:center; 
  gap: 12px; 
}

.site-logo { 
  display:block; 
  height:64px; 
  max-height:64px; 
  width:auto; 
  object-fit:contain; 
}

.hero { 
  width:100%; 
  height:clamp(180px,30vh,420px); 
  overflow:hidden; 
  position:relative; 
  z-index:10; 
  background: transparent; 
  margin: 0; 
}

.hero img { 
  display:none; 
  visibility:hidden; 
}

.hero-bg, .hero-img, .hero img { 
  width:100%; 
  height:100%; 
  object-fit:cover; 
  display:block; 
}

/* NAV LAYOUT */
.main-nav { 
  width: 100%; 
  position:relative; 
  z-index: 3000; 
  background:#fff; 
  border-bottom:1px solid rgba(0,0,0,0.05); 
}

.nav-inner.nav-flex { 
  display:flex; 
  align-items:center; 
  justify-content: space-between; 
  gap:1rem; 
  padding:0 16px; 
  min-height:var(--nav-height); 
  box-sizing:border-box; 
}

.nav-list { 
  list-style:none; 
  margin:0; 
  padding: 12px 0; 
  display:flex; 
  gap:1.25rem; 
  align-items:center; 
  justify-content:center; 
}

.nav-item { 
  font-size:14px; 
  line-height:1; 
  margin:0; 
  padding:0; 
  position:relative; 
}

/* LINKS / BUTTONS - MONTSERRAT APLICADO */
.nav-link, .nav-button { 
  display:inline-flex; 
  align-items: center; 
  gap:8px; 
  padding:10px 14px; 
  color: var(--text-default); 
  font-family:'Montserrat', sans-serif;
  font-size:0.95rem;
  font-weight:600;
  text-decoration:none; 
  background:transparent; 
  border:0; 
  cursor:pointer; 
  border-radius:6px; 
  transition:color .15s ease, background-color .15s ease; 
}

.nav-link:focus, .nav-button:focus { 
  outline:3px solid rgba(109, 126, 79, 0.3); 
  outline-offset: 2px; 
}

.main-nav .nav-list > li.nav-item > .nav-link:hover, 
.main-nav .nav-list > li.nav-item > .nav-button:hover { 
  color:var(--site-green); 
  background:#f5f5f5;
}

/* SUBMENU BASE */
.submenu { 
  list-style:none; 
  margin:0; 
  padding:0; 
  display: block; 
}

.nav-subitem { 
  position:relative; 
}

/* caret */
.caret { 
  font-size:11px; 
  line-height:1; 
  transition:transform .18s ease; 
}

/* DROPDOWN WRAP:  generic for all levels, data-level controls positioning */
.dropdown-wrap {
  display:none;
  position:absolute;
  min-width:220px;
  background:#fff;
  border-radius:8px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
  padding:8px 0;
  z-index:999;
  white-space:nowrap;
}

/* Top-level dropdown (level 0): under the button */
.dropdown-wrap[data-level="0"] { 
  left:0; 
  top:100%; 
  margin-top:4px;
}

/* Nested dropdowns (level >=1): to the right of parent */
.dropdown-wrap[data-level="1"],
.dropdown-wrap[data-level="2"],
.dropdown-wrap[data-level="3"] {
  left:100%;
  top:0;
  margin-left:4px;
}

/* Show rules:  hover (desktop) and . open class (JS click) */
@media (hover: hover) and (pointer: fine) {
  .dropdown-parent:hover > .dropdown-wrap { display:block; }
  .dropdown-parent.nested:hover > .dropdown-wrap { display:block; }
}

.dropdown-wrap.open { display:block; }

/* Buttons inside menu - TOP LEVEL */
.nav-summary { 
  position:relative; 
  padding-right:28px; 
  display:inline-flex; 
  align-items: center; 
  gap:8px; 
  font-family:'Montserrat', sans-serif;
  font-size: 0.95rem;
  font-weight:600;
  background:transparent; 
  border:0; 
  cursor:pointer; 
}

.nav-summary .caret { 
  position:absolute; 
  right:8px; 
  top:50%; 
  transform:translateY(-50%); 
  transition:transform .18s ease; 
}

/* Nested button variants (inside submenu) - SUBAPARTADOS */
.nav-button.nested { 
  width:100%; 
  justify-content:space-between; 
  padding:10px 18px; 
  text-align:left; 
  border-radius:0;
  font-family:'Montserrat', sans-serif;
  font-size:0.9rem;
  font-weight: 500;
}

.nav-button.nested .caret { 
  position:static; 
  margin-left:8px; 
  transform:none; 
}

/* Make parent title green while hovered/focused */
.dropdown-parent:hover > .nav-summary,
.dropdown-parent:focus-within > .nav-summary,
.dropdown-parent:hover > .nav-link,
.dropdown-parent:focus-within > .nav-link {
  color:var(--site-green);
}

/* Submenu links - SUBAPARTADOS Y SUB-SUBAPARTADOS */
.submenu .nav-subitem > a,
.submenu .nav-subitem > .nav-button {
  display:block;
  padding:10px 18px;
  color:var(--text-default);
  font-family:'Montserrat', sans-serif;
  font-size:0.9rem;
  font-weight: 500;
  text-decoration: none;
  transition:all 0.2s ease;
}

/* Sub-subapartados (nivel 3+) */
.dropdown-wrap[data-level="2"] .nav-subitem > a,
.dropdown-wrap[data-level="3"] .nav-subitem > a,
.dropdown-wrap[data-level="2"] .nav-subitem > .nav-button,
.dropdown-wrap[data-level="3"] .nav-subitem > .nav-button {
  font-size:0.85rem;
  font-weight:400;
  padding-left:24px;
}

.submenu .nav-subitem > a:hover,
.submenu .nav-subitem > .nav-button:hover {
  background:#f5f5f5;
  color:var(--site-green);
}

/* Rotation of carets when open via class on parent (. open) */
.dropdown-parent.open > .nav-summary .caret,
.dropdown-parent.nested.open > .nav-button .caret,
.dropdown-wrap.open + .nav-summary .caret {
  transform:rotate(-180deg);
}

/* ===== FIX: Evitar que submenús se salgan de la pantalla ===== */

/* Últimos 2 items:  submenú principal alineado a la derecha */
.nav-list > .nav-item:nth-last-child(-n+2) .dropdown-wrap[data-level="0"] {
  left: auto;
  right:0;
}

/* Submenús anidados: abrir hacia la IZQUIERDA en lugar de derecha */
.nav-list > .nav-item:nth-last-child(-n+2) .dropdown-wrap[data-level="1"],
.nav-list > .nav-item:nth-last-child(-n+2) .dropdown-wrap[data-level="2"],
.nav-list > .nav-item:nth-last-child(-n+2) .dropdown-wrap[data-level="3"] {
  left: auto;
  right:100%;
  margin-left:0;
  margin-right:4px;
}

/* ===== FIN DEL FIX ===== */

/* Mobile:  dropdowns become static stacked lists */
@media (max-width: 768px) {
  .nav-list { 
    flex-direction:column; 
    align-items: stretch; 
    gap:0; 
    padding:8px 0; 
  }
  
  .nav-link, .nav-button {
    font-size:1rem;
    padding:14px 20px;
  }
  
  .dropdown-wrap { 
    position:static; 
    display:none; 
    box-shadow:none; 
    padding-left:12px; 
    margin: 0; 
    white-space:normal; 
    background:#f9f9f9;
    border-radius:0;
  }
  
  .dropdown-wrap.open { display:block; }
  
  .nav-summary .caret { 
    margin-left:auto; 
    position:static; 
    transform:none; 
    right:auto; 
    top:auto; 
    padding-left:8px; 
  }
  
  .nav-button.nested { 
    padding-left:32px;
    font-size:0.95rem;
  }
  
  .dropdown-wrap[data-level="2"] .nav-subitem > a,
  .dropdown-wrap[data-level="3"] .nav-subitem > a {
    padding-left:48px;
    font-size:0.9rem;
  }
}

/* keyboard support:  focus-within shows submenu */
.dropdown-parent:focus-within > .dropdown-wrap,
.nav-subitem:focus-within > .dropdown-wrap {
  display:block;
}

/* stacking fixes */
.site-header, .main-nav { 
  position:relative; 
  z-index:3000; 
}

.hero, .hero * { 
  transform:none ! important; 
  opacity:1 !important; 
}

/* utilities */
.visually-hidden { 
  position:absolute ! important; 
  height:1px; 
  width:1px; 
  overflow:hidden; 
  clip: rect(1px,1px,1px,1px); 
  white-space:nowrap; 
}

.hidden { 
  display:none ! important; 
}